"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[298],{8298:(e,s,t)=>{t.r(s),t.d(s,{default:()=>T});var r=t(5043);const o="ProfileInfo_descriptionBlock__k4HM9",i="ProfileInfo_profilePhoto__0KZnC",n="ProfileInfo_contact__M28g1";var l=t(8878),a=t(5314),d=t(579);const c=e=>{let[s,t]=(0,r.useState)(!1),[o,i]=(0,r.useState)(e.status);(0,r.useEffect)((()=>{i(e.status)}),[e.status]);return(0,d.jsxs)("div",{children:[!s&&(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"Status"}),": ",(0,d.jsx)("span",{onDoubleClick:()=>{e.isOwner&&t(!0)},children:e.status||"-----"})]}),s&&(0,d.jsx)("div",{children:(0,d.jsx)("input",{onChange:e=>{i(e.currentTarget.value)},autoFocus:!0,onBlur:()=>{t(!1),e.updateStatus(o)},value:o})})]})};var u=t(8304),h=t(6614),x=t(3842);const j=(0,x.A)({form:"edit-profile"})((e=>{let{handleSubmit:s,profile:t,error:r}=e;return(0,d.jsxs)("form",{onSubmit:s,children:[(0,d.jsx)("div",{children:(0,d.jsx)("button",{children:"Save"})}),r&&(0,d.jsx)("div",{className:u.A.formSummaryError,children:r}),(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"Full name"}),":",(0,h.F)("Full name","fullName","input",null,h.M)]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"About me"}),":",(0,h.F)("About me","aboutMe","input",null,h.M)]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"Looking for a job"}),":",(0,h.F)(null,"lookingForAJob","input",null,h.M,{type:"checkbox"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"My professional skills"}),":",(0,h.F)("My professional skills","lookingForAJobDescription","textarea",null,h.M)]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"Contacts"}),": ",Object.keys(t.contacts).map((e=>(0,d.jsx)("div",{className:n,children:(0,d.jsxs)("b",{children:[e,": ",(0,h.F)(e,"contacts."+e,"input",null,h.M)]})},e)))]})]})})),p=e=>{let{profile:s,isOwner:t,goToEditMode:r}=e;return(0,d.jsxs)("div",{children:[t&&(0,d.jsx)("div",{children:(0,d.jsx)("button",{onClick:r,children:"Edit"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"Full name"}),": ",s.fullName]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"About me"}),": ",s.aboutMe]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"Looking for a job"}),": ",s.lookingForAJob?"yes":"no"]}),s.lookingForAJob&&(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"My professional skills"}),": ",s.lookingForAJobDescription]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"Contacts"}),": ",Object.keys(s.contacts).map((e=>(0,d.jsx)(m,{contactTitle:e,contactValue:s.contacts[e]},e)))]})]})},m=e=>{let{contactTitle:s,contactValue:t}=e;return(0,d.jsxs)("div",{className:n,children:[(0,d.jsx)("b",{children:s}),": ",t]})},f=e=>{let{isOwner:s,profile:t,status:n,updateStatus:u,savePhoto:h,saveProfile:x}=e,[m,f]=(0,r.useState)(!1);if(!t)return(0,d.jsx)(l.A,{});return(0,d.jsxs)("div",{children:[(0,d.jsx)("img",{src:"https://bogatyr.club/uploads/posts/2023-01/thumbs/1674852902_bogatyr-club-p-zvezdnoe-nebo-fon-fon-vkontakte-2.jpg",alt:"content_picture",height:360,width:984}),(0,d.jsxs)("div",{className:o,children:[(0,d.jsx)("img",{src:null!=t.photos.large?t.photos.large:a,className:i}),(0,d.jsx)("div",{children:s&&(0,d.jsx)("input",{type:"file",onChange:e=>{e.target.files.length&&h(e.target.files[0])}})}),m?(0,d.jsx)(j,{initialValues:t,profile:t,onSubmit:e=>{x(e).then((()=>{f(!1)}))}}):(0,d.jsx)(p,{goToEditMode:()=>{f(!0)},profile:t,isOwner:s}),(0,d.jsx)("div",{children:(0,d.jsx)(c,{isOwner:s,status:n,updateStatus:u})})]})]})};var v=t(9970);const g="MyPosts_postsBlock__Ce03M",b="MyPosts_posts__E0dhm",P="Post_item__Vjz2+",_=e=>(0,d.jsx)("div",{children:(0,d.jsxs)("div",{className:P,children:[(0,d.jsx)("img",{src:"https://cs10.pikabu.ru/post_img/big/2019/11/11/10/1573494458145017681.png"}),e.message,(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{children:"like"})," ",e.likes_counter]})]})});var A=t(5963),k=t(9830);const F=(0,k.d)(10),S=(0,x.A)({form:"profileAddPostForm"})((e=>(0,d.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,d.jsx)("div",{children:(0,d.jsx)(A.A,{placeholder:"Enter post text",name:"newPostText",component:h.M,child:"textarea",validate:[k.m,F]})}),(0,d.jsx)("div",{children:(0,d.jsx)("button",{children:"Add Post"})})]}))),M=r.memo((e=>{let s=[...e.posts].reverse().map((e=>(0,d.jsx)(_,{message:e.message,likes_counter:e.likesCount},e.id)));return(0,d.jsxs)("div",{className:g,children:[(0,d.jsx)("h3",{children:"My posts"}),(0,d.jsx)("div",{children:(0,d.jsx)(S,{onSubmit:s=>{e.addPost(s.newPostText)}})}),(0,d.jsx)("div",{className:b,children:s})]})}));var y=t(3003);const C=(0,y.Ng)((e=>({posts:e.profilePage.posts,newPostText:e.profilePage.newPostText})),(e=>({addPost:s=>{e(v.o1.addPostActionCreator(s))}})))(M),w=e=>(0,d.jsxs)("div",{children:[(0,d.jsx)(f,{isOwner:e.isOwner,profile:e.profile,status:e.status,updateStatus:e.updateStatus,savePhoto:e.savePhoto,saveProfile:e.saveProfile}),(0,d.jsx)(C,{})]});var N=t(2134),E=t(5751),I=t(3923),O=t(818);const T=(0,I.Zz)(O.y,E.H,(0,y.Ng)((e=>({profile:e.profilePage.profile,isFetching:e.profilePage.isFetching,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth})),{getUserProfile:v.VM,getStatus:v.BS,updateStatus:v.yB,savePhoto:v.Ah,saveProfile:v.Lt}))((e=>{let{userId:s}=(0,N.g)();return s||(s=e.authorizedUserId),(0,r.useEffect)((()=>{e.getUserProfile(s)}),[s]),(0,r.useEffect)((()=>{e.getStatus(s)}),[s]),(0,d.jsx)(d.Fragment,{children:e.isFetching?(0,d.jsx)(l.A,{}):(0,d.jsx)(w,{isOwner:!(s!=e.authorizedUserId),profile:e.profile,status:e.status,updateStatus:e.updateStatus,savePhoto:e.savePhoto,saveProfile:e.saveProfile})})}))},6614:(e,s,t)=>{t.d(s,{F:()=>l,M:()=>n});t(5043);var r=t(8304),o=t(5963),i=t(579);const n=e=>{let{input:s,meta:t,...o}=e;const n=t.touched&&t.error;return(0,i.jsxs)("div",{className:"".concat(r.A.formControl," ").concat(n&&r.A.error),children:[(0,i.jsx)("div",{children:(0,i.jsx)(o.child,{...o,...s,...t})}),n&&(0,i.jsx)("span",{children:t.error})]})};function l(e,s,t,r,n,l,a,d){let c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{};return(0,i.jsxs)("div",{children:[a,(0,i.jsx)(o.A,{name:e,child:s,component:t,placeholder:r,validate:n,type:l,value:d,...c})]})}},9830:(e,s,t)=>{t.d(s,{d:()=>o,m:()=>r});const r=e=>{if(!e)return"Field is required"},o=e=>s=>{if(s.length>e)return"Max length is ".concat(e," symbols")}},5751:(e,s,t)=>{t.d(s,{H:()=>l});t(5043);var r=t(3003),o=t(2134),i=t(579);let n=e=>({isAuth:e.auth.isAuth});function l(e){return(0,r.Ng)(n)((s=>{let{isAuth:t,router:r,...n}=s;return s.isAuth?(0,i.jsx)(e,{...n}):(s.isAuth||s.router)&&(s.isAuth||s.router.params.userId)?!s.isAuth&&s.router.params.userId?(0,i.jsx)(e,{...n}):void 0:(0,i.jsx)(o.C5,{to:"/login"})}))}},8304:(e,s,t)=>{t.d(s,{A:()=>r});const r={formControl:"FormsControls_formControl__EUGJ+",error:"FormsControls_error__srujM",formSummaryError:"FormsControls_formSummaryError__AKM+F"}},5314:(e,s,t)=>{e.exports=t.p+"static/media/user.25558adea84bbfb81666.png"}}]);
//# sourceMappingURL=298.1238b9a4.chunk.js.map